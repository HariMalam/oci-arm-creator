services:
  oci-creator:
    # Use the Dockerfile in the current directory to build the image
    build:
      context: .

    # Map the application port
    ports:
      - "3000:3000"

    # Map the current host directory's logs folder to the container's working directory (/app)
    # This allows you to view the log files (oci-vm-creator.log, etc.) on your host machine.
    volumes:
      - ./logs:/app/logs

    # Load environment variables from the .env file
    env_file:
      - .env

    # Always attempt to restart the container if it fails (e.g., waiting for capacity)
    restart: always
